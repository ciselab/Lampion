version: '3.8'

services:
  {% for config in configurations -%}
  CodeBert_Preprocessing_{{ config.run_number }}:
    image: lampion/codebert-preprocessing:latest
    volumes:
      - ./ur_dataset:/raw_data:ro
      - {{ config.path_to }}/dataset:/data
      - {{ config.path_to }}:/config:ro
    environment:
      RAW_DATA_FILE: test_java.jsonl
      POST_ALTERNATION_JSONL: preprocessed_test_java.jsonl

  {% endfor %}